<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./index.css">
</head>
<body>
    
    <div id="app" ref='app'>
        <div class="header">
            <cv-nav></cv-nav>

            <div class="title-wrap">
                <h4 class="subtitle">Hello, I'm</h4>
                <h1 class="title">Shuai Yuan</h1>
                <div class='arrow-wrap'><img src="./img/arrow-down.svg" alt="down"></div>
            </div>
        </div>

        <skill-section></skill-section>
        <experience-section></experience-section>
        <education-section></education-section>
        <work-section @view-work-detail=viewWorkDetail></work-section>
        <footer-section></footer-section>
        <work-detail :state=workDetailOpened :detail=workDetail @close-detail=closeDetail></work-detail>


    </div>


    <!-- unsolved issue - use local vendor js for parcel not working -->
    <script src="https://unpkg.com/scrollreveal"></script>
    <script src="./vue.js"></script> 
    <script src="./index.js"></script>
    <script>
        var myCallback = function(){
            document.querySelector('.arrow-wrap').classList.add('active')
        };
        ScrollReveal().reveal('.arrow-wrap', { afterReveal: myCallback });

        document.querySelector('.arrow-wrap').addEventListener('click', ()=>{
            let value = document.querySelector('.skill-section').offsetTop;
            // snippet
            let scrollTo = function (position, timeout) {
                var scrollTop = document.documentElement.scrollTop || document.body.scrollTop,
                    direction = position - scrollTop > 0 ? 1 : -1,
                    distance = Math.abs(position - scrollTop),
                    split = distance / 50,
                    _timeout;

                if (position !== scrollTop) {
                    timeout = timeout || 1000;
                    split *= direction;

                    _timeout = setInterval(function () {
                        scrollTop += split;
                        distance -= Math.abs(split);
                        if (0 >= distance) {
                            window.scrollTo(0, position);
                            clearInterval(_timeout);
                            _timeout = null;
                        } else {
                            window.scrollTo(0, scrollTop);
                        }
                    }, timeout / 100);
                }
            };

            scrollTo(value, 500);
        })

    </script>
</body>
</html>